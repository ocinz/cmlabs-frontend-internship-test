<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div>
      <nav class="flex items-baseline gap-x-5 px-4 py-2 bg-white rounded-t-lg justify-between">
        <a href="#"><h1 class="font-semibold text-xl">Meal App</h1></a>
        <ul class="flex gap-x-3 text-black items-center">
          <li class="text-[#55BDB3]"><a href="index.html">Home</a></li>
          <li><a href="./src/views/categories.html">Categories</a></li>
          <li><a href="./src/views/about.html">About</a></li>
          <li class="bg-[#55BDB3] px-2 py-1 text-zinc-50 rounded hover:bg-[#2e7770] active:bg-[#55BDB3]"><a href="#">Signup</a></li>
          <li class="border-solid border-[#55BDB3] border-2 px-2 py-[1.8px] rounded"><a href="#">Login</a></li>
        </ul>
      </nav>
      <h1>Hello this category page</h1>
      <main id="items" class=""></main>
    </div>
  </body>
  <script>
    const fetchData = async () => {
      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      const category = urlParams.get("category");
      document.title = category ? category + " | App Meal" : "Category | App Meal";
      const response = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`);
      const jsonData = await response.json();
      const data = jsonData.meals;

      let show = document.createElement("div");
      show.className = "grid lg:grid-cols-5 md:grid-cols-4 sm:grid-cols-2 gap-2";

      for (let index = 0; index < data.length; index++) {
        const element = document.createElement("a");
        const menu = data[index].strMeal;
        const image = data[index].strMealThumb;
        const id = data[index].idMeal;
        element.innerText = category;
        element.href = `detail.html?id=${id}&menu=${menu}`;
        element.className = `cursor-pointer bg-[url(${image})] text-white text-center rounded h-24 align-middle bg-cover bg-center hover:bg-slate-500 `;
        show.appendChild(element);
      }

      document.getElementById("items").appendChild(show);
    };

    fetchData();
  </script>
</html>
